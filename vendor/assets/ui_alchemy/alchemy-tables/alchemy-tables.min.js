angular.module("alch-templates").run(["$templateCache",function(e){e.put("component/templates/table.html",'<thead>  <tr>    <th class="table-selection-row"         colspan="{{ table.data.columns.length +1 }}"         ng-show="table.more_results()">        All {{ table.offset }} results shown are currently selected.          <a href="">Select all {{ table.total }} results.</a>    </th>  </tr>  <tr>    <th ng-show="rowSelect" class="row-select">      <input class="select_all"              type="checkbox"              name="select_all"              ng-model="table.all_selected"              ng-change="table.select_all()">    </th>    <th ng-click="table.sort(header)"         ng-show="header.show"         ng-repeat="header in table.data.columns"         ng-class="{ \'active-column\' : header.active }">        {{ header.display }}    </th>  </tr></thead><tbody infinite-scroll="table.next_page()"        infinite-scroll-disable="table.loading_more"        infinite-scroll-distance="table.scroll_distance">  <tr ng-class="{active : row.selected }"       ng-repeat="row in table.data.rows"       ng-show="show_row(row)">    <td ng-show="rowSelect" class="row-select">      <input ng-model="row.selected"              type="checkbox" name="{{ row.id }}"              value="{{ row.id }}"              ng-change="adjust_num_selected(row.selected)">    </td>    <td ng-show="show_cell(cell)"         ng-repeat="cell in row.cells"        ng-bind-html-unsafe="cell.display">          </td>  </tr></tbody>')}]),angular.module("alch-templates").run(["$templateCache",function(e){e.put("component/templates/tool_bar.html",'<div ng-model="table.data.columns" class="form table-toolbar">  <div class="fl">    <input type="text"            class="input"            placeholder="Search..."            ng-model="table.search_string"            on-enter="table.search(table.search_string)"    />    Showing {{ table.offset }}-{{ table.subtotal }} of {{ table.total }} {{ table.model }}  </div>  <div class="fr deselect" ng-show="table.num_selected">    <span ng-model="table.num_selected">{{ table.num_selected }} Selected</span>    <a ng-click="deselect_all()" href="">Deselect All</a>  </div>  <span class="fr table-actions" ng-transclude></span></div>')}]),angular.module("alchemy").directive("alchTable",["$window",function(e){return{restrict:"A",scope:{table:"=alchTable",rowSelect:"@"},templateUrl:"component/templates/table.html",link:function(l,t){l.$watch("table.data.rows",function(a,n){if(a&&!n){var c=e.innerHeight-(t[0].offsetTop+t[0].offsetHeight);c>0&&l.table.next_page()}})},controller:["$scope",function(e){e.table.num_selected=0,e.table.all_selected=!1,e.table.scroll_distance||(e.table.scroll_distance=0),e.show_cell=function(l){var t;return angular.forEach(e.table.data.columns,function(e){e.id===l.column_id&&(t=e.show)}),t},e.show_row=function(e){return e.show},e.adjust_num_selected=function(l){e.table.num_selected+=l?1:-1},e.table.get_selected_rows=function(){var l=[];return angular.forEach(e.table.data.rows,function(e){e.selected&&l.push(e)}),l},e.table.select_all=function(l){var t=e.table;void 0!==l&&(t.all_selected=l),t.num_selected=t.all_selected?t.data.rows.length:0,angular.forEach(t.data.rows,function(e){e.selected=t.all_selected})},e.table.more_results=function(){var l=e.table.total>e.table.offset;return l=l&&e.table.all_selected}}]}}]),angular.module("alchemy").directive("alchTableToolbar",function(){return{restrict:"A",transclude:!0,scope:{table:"=alchTableToolbar"},templateUrl:"component/templates/tool_bar.html",controller:["$scope",function(e){e.deselect_all=function(){e.table.select_all(!1)}}]}});